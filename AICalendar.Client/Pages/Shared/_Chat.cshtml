<div class="chat-widget">
    <div class="chat-header">
        <h6 class="mb-0">AI Assistant</h6>
    </div>
    
    <div id="chat-messages" class="chat-messages">
        <div class="message ai-message">
            <div class="message-content">
                Hello! How can I help you today?
            </div>
        </div>
    </div>
    
    <div class="chat-input-area">
        <div class="input-group">
            <input type="text" id="chat-input" class="form-control" placeholder="Type your message..." />
            <button type="button" id="send-btn" class="btn btn-primary">Send</button>
        </div>
    </div>
</div>

<style>
    .chat-widget {
        height: 570px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #fff;
        display: flex;
        flex-direction: column;
    }

    .chat-header {
        padding: 12px 16px;
        background: #f8f9fa;
        border-bottom: 1px solid #ddd;
        border-radius: 8px 8px 0 0;
    }

    .chat-messages {
        flex: 1;
        padding: 16px;
        overflow-y: auto;
        background: #fff;
    }

    .message {
        margin-bottom: 12px;
        display: flex;
    }

    .user-message {
        justify-content: flex-end;
    }

    .ai-message {
        justify-content: flex-start;
    }

    .message-content {
        max-width: 80%;
        padding: 8px 12px;
        border-radius: 16px;
        font-size: 14px;
        line-height: 1.4;
    }

    .user-message .message-content {
        background: #007bff;
        color: white;
    }

    .ai-message .message-content {
        background: #f1f3f4;
        color: #333;
    }

    .chat-input-area {
        padding: 12px 16px;
        border-top: 1px solid #ddd;
        background: #fff;
        border-radius: 0 0 8px 8px;
    }

    .chat-input-area .form-control {
        border-right: 0;
        border-radius: 20px 0 0 20px;
    }

    .chat-input-area .btn {
        border-radius: 0 20px 20px 0;
        border-left: 0;
    }

    .typing-indicator {
        font-style: italic;
        color: #666;
        font-size: 13px;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chatInput = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const chatMessages = document.getElementById('chat-messages');

    const mockResponses = [
        "I can help you schedule events in your calendar.",
        "What would you like me to help you with today?",
        "I can suggest optimal meeting times based on your calendar.",
        "Would you like me to create a new event for you?",
        "I'm here to assist with your calendar management."
    ];

    function addMessage(text, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = isUser ? 'message user-message' : 'message ai-message';
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        contentDiv.textContent = text;
        
        messageDiv.appendChild(contentDiv);
        chatMessages.appendChild(messageDiv);
        
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        // Add user message
        addMessage(message, true);
        chatInput.value = '';
        sendBtn.disabled = true;

        // Show typing indicator
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message ai-message';
        typingDiv.innerHTML = '<div class="message-content typing-indicator">Typing...</div>';
        typingDiv.id = 'typing';
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Simulate response after 1 second
        setTimeout(() => {
            document.getElementById('typing').remove();
            const response = mockResponses[Math.floor(Math.random() * mockResponses.length)];
            addMessage(response, false);
            sendBtn.disabled = false;
            chatInput.focus();
        }, 1000);
    }

    // Send message on button click
    sendBtn.addEventListener('click', sendMessage);

    // Send message on Enter key
    chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    // Focus input on load
    chatInput.focus();
});
</script>